#include "sll.h"

//remove duplicate data's from list
int remove_duplicates( Slist **head )
{
	/* If list is empty */
	if (*head == NULL)
	{
		return FAILURE;			//list empty
	}
	Slist *prev = *head;
	Slist *ptr1 = *head;
	Slist *ptr2 = ptr1->link;
	while(ptr1->link!=NULL)
	{	printf("9\n");
		//while(ptr2!=NULL)				//PROBLEM//last element not accessible (otherwise OK)
		while(ptr2->link!=NULL)					//PROBLEM//adjacent repeate items cause fault
		{	
			if(ptr1->data==ptr2->data && ptr1!=ptr2 )
			{
				printf("if\n");
				while(ptr1->data==ptr2->data && ptr1!=ptr2 && ptr2->link!=NULL)
				{
					ptr2=ptr2->link;
				}
				prev->link=ptr2->link;					//we remove ptr2 and prev will point to a place where ptr2 would've pointed				
				
				ptr2->link=NULL;
				free(ptr2);								
			}
			else if(ptr1->data!=ptr2->data && ptr1!=ptr2)
			{
				printf("else\n");
				prev=ptr2;								//just move ptrs 1 step ahead				
			}	
			ptr2=ptr2->link;
		}											//1st iteration complete so go to next number	
		printf("ITER\n");
		ptr1=ptr1->link;		
		prev=ptr1;
		ptr2=prev->link;
	 	printf("OVER\n");
	}
	return SUCCESS;
}